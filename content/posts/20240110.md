+++
title = "React学习笔记"
date = "2024-01-10"
description = ""
tags = [
    "study"
]
categories = [
    "study",
    "React"
]
+++

## MouseEvent - 鼠标事件

{{< highlight react >}}
function handleClick() {
    console.log('onClick')
}
<button
  onClick={handleClick}
  onMouseEnter={e => console.log('onMouseEnter')}
  onMouseOver={e => console.log('onMouseOver')}
  onMouseDown={e => console.log('onMouseDown')}
  onMouseUp={e => console.log('onMouseUp')}
  onMouseLeave={e => console.log('onMouseLeave')}
/>
{{< /highlight >}}

## Math.floor() 与 Math.random()

{{< highlight react >}}
Math.floor()
// -1.1: -2  3.3: 3  5.4: 5 （向下取比它小的最大一个整数）
Math.random()
// [0, 1)
const randomNumber = Math.floor(Math.random() * arrayA.length)
url = arrayA[randomNumber].url
{{< /highlight >}}

## state

### React.useState()

{{< highlight react >}}
const [count, changeCount] = React.useState(0)
console.log(count, changeCount)
// 0 f()
{{< /highlight >}}

### Changing state with a callback function

{{< highlight react >}}
export default function App() {
    const [count, setCount] = React.useState(0)
    function add() {
        setCount(prevCount => prevCount + 1)
    }
    function subtract() {
        setCount(prevCount => prevCount - 1)
    }
    return (
        <button onClick={subtract}>-</button>
            <div><h1>{count}</h1></div>
        <button onClick={add}>+</button>
    )
}
{{< /highlight >}}

###### Code description

1. `const [count, setCount] = React.useState(0)`
   - set count to 0
2. `const [memeImage, setMemeImage] = React.useState("")`
   - set memeImage to an empty string


###### 2 options for what you can pass into a state setter function

1. New value of state - `setCount(42)`
2. Callback function - whatever the call back function returns === new value of state
   `setCount(prevCount => prevCount + 1)`


### Using conditional (ternary) operator

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator

{{< highlight react >}}
const [isGoingOut, setIsGoingOut] = React.useState(true)
function changeMind() {
    setIsGoingOut(prevState => !prevState)
}
return (
    <div onClick={changeMind}>
        <h1>{isGoingOut ? "YES" : "NO"}</h1>
    </div>
)
{{< /highlight >}}

###### Code description

- `setIsGoingOut(prevState => !prevState)`
  - if 'isGoigOut' is true, set it to false, otherwise, set it to true.


## Complex state
### arrays
{{< highlight react >}}
const [thingsArray, setThingsArray] = React.useState("Thing 1", "Thing 2")
function addItem() {
    setThingsArray(prevThingsArray => {
        return [...prevThingsArray, `Thing ${prevThingsArray.length + 1}`]
    })
}
const thingsElements = thingsArray.map(thing => <p key={thing}>{thing}</p>)
{{< /highlight>}}

1. `return [...prevThingsArray, "new thing"]`
   - Adding "new thing" to thingsArray as a new element
2. `setArray(prevArray => [...prevArray, 123])` and
    ```
    setArray(prevArray => {
        return [...prevArray, 123]
    })
    ```
    are the same.

### objects
{{< highlight react >}}
const [contact, setContact] = React.useState({
    firstName: "John",
    lastName: "Doe",
    phone: "+1 (719) 555-1212",
    email: "itsmyrealname@example.com",
    isFavorite: false
})
let starIcon = contact.isFavorite ? "star-filled.png" : "star-empty.png"
function toggleFavorite() {
    setContact(prevContact => {
        return {
            ...prevContact,
            isFavorite: !prevContact.isFavorite
        }
    })
}
{{< /highlight >}}

<img src={`../images/${starIcon}`} onClick={toggleFavorite}>

1. `const [objectA, setObject] = React.useState({ key1: "123", key2: false })`
   - set objectA to an object {key1: "123", key2: false}
2.  ```
    setObject(prevObject => {
        return {
            ...prevObject,
            key2: !key2
        }
    })
    ```
**{...prevObject, keyN: xxxx}**
**[...prevArray, newValue]**